{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GHOST - Voice OTP Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Space+Mono:wght@400;700&display=swap');
        
        :root {
            --primary: #00ff9d;
            --secondary: #00b4ff;
            --accent: #ff00aa;
            --dark: #0a0a0a;
            --light: #f0f0f0;
            --terminal: #00ff41;
        }
        
        body {
            font-family: 'Space Mono', monospace;
            background-color: var(--dark);
            color: var(--light);
            overflow-x: hidden;
        }
        
        .hacker-font {
            font-family: 'Share Tech Mono', monospace;
        }
        
        .terminal-text {
            color: var(--terminal);
            text-shadow: 0 0 5px var(--terminal);
        }
        
        .neon-pulse {
            animation: neonPulse 2s infinite alternate;
        }
        
        @keyframes neonPulse {
            from {
                box-shadow: 0 0 5px var(--primary), 0 0 10px var(--primary), 0 0 15px var(--primary);
            }
            to {
                box-shadow: 0 0 10px var(--primary), 0 0 20px var(--primary), 0 0 30px var(--primary);
            }
        }
        
        .glitch-effect {
            position: relative;
        }
        
        .glitch-effect::before, .glitch-effect::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark);
        }
        
        .glitch-effect::before {
            left: 2px;
            text-shadow: -2px 0 var(--accent);
            clip: rect(24px, 550px, 90px, 0);
            animation: glitch-anim-1 2s infinite linear alternate-reverse;
        }
        
        .glitch-effect::after {
            left: -2px;
            text-shadow: -2px 0 var(--secondary);
            clip: rect(85px, 550px, 140px, 0);
            animation: glitch-anim-2 2s infinite linear alternate-reverse;
        }
        
        @keyframes glitch-anim-1 {
            0% { clip: rect(32px, 9999px, 100px, 0); }
            20% { clip: rect(88px, 9999px, 66px, 0); }
            40% { clip: rect(91px, 9999px, 98px, 0); }
            60% { clip: rect(85px, 9999px, 73px, 0); }
            80% { clip: rect(20px, 9999px, 28px, 0); }
            100% { clip: rect(64px, 9999px, 22px, 0); }
        }
        
        @keyframes glitch-anim-2 {
            0% { clip: rect(65px, 9999px, 119px, 0); }
            20% { clip: rect(25px, 9999px, 35px, 0); }
            40% { clip: rect(79px, 9999px, 78px, 0); }
            60% { clip: rect(92px, 9999px, 50px, 0); }
            80% { clip: rect(10px, 9999px, 70px, 0); }
            100% { clip: rect(60px, 9999px, 110px, 0); }
        }
        
        .matrix-fall {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.1) 0%, rgba(0,255,100,0.05) 100%);
            pointer-events: none;
            z-index: -1;
        }
        
        .matrix-char {
            position: absolute;
            color: var(--terminal);
            font-size: 14px;
            opacity: 0;
            animation: matrixFall linear;
        }
        
        @keyframes matrixFall {
            0% {
                transform: translateY(-100px);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh);
                opacity: 0;
            }
        }
        
        .light-mode {
            --dark: #f0f0f0;
            --light: #0a0a0a;
            --terminal: #007a3d;
            background-color: var(--dark);
            color: var(--light);
        }
        
        .default-mode {
            --dark: #121212;
            --light: #e0e0e0;
            --terminal: #00c853;
            background-color: var(--dark);
            color: var(--light);
        }
        
        .tech-stack-scroll {
            animation: scrollTech 30s linear infinite;
            white-space: nowrap;
        }
        
        @keyframes scrollTech {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        
        .radial-chart {
            position: relative;
            width: 100px;
            height: 100px;
        }
        
        .radial-chart::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 5px solid transparent;
            border-top-color: var(--primary);
            border-right-color: var(--primary);
            transform: rotate(45deg);
            transition: transform 0.5s;
        }
        
        .radial-chart:hover::before {
            transform: rotate(405deg);
        }
        
        .feature-card {
            transition: all 0.3s;
            border: 1px solid rgba(0, 255, 157, 0.1);
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 255, 157, 0.2);
            border-color: var(--primary);
        }
        
        .verification-result {
            transition: all 0.5s;
            max-height: 0;
            overflow: hidden;
        }
        
        .verification-result.active {
            max-height: 500px;
        }
        
        /* Premium Glass Effect - Updated for Dark Theme */
        .glass-card {
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 255, 157, 0.2);
            box-shadow: 
                0 8px 32px 0 rgba(0, 255, 157, 0.1),
                inset 0 1px 0 rgba(0, 255, 157, 0.1);
            color: var(--light);
        }
        
        /* History Page Inspired Styles - Updated for Dark Theme */
        .header-card {
            background: linear-gradient(135deg, rgba(0, 255, 157, 0.1) 0%, rgba(0, 180, 255, 0.1) 100%);
            border: 1px solid rgba(0, 255, 157, 0.3);
            border-radius: 12px;
            color: var(--light);
            box-shadow: 0 8px 25px rgba(0, 255, 157, 0.2);
        }
        
        .stats-card {
            background: rgba(10, 10, 10, 0.9);
            border-radius: 12px;
            border: 1px solid rgba(0, 255, 157, 0.2);
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 255, 157, 0.1);
            color: var(--light);
        }
        
        .stats-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 255, 157, 0.3);
            border-color: var(--primary);
        }
        
        .history-container {
            background: rgba(10, 10, 10, 0.9);
            border-radius: 12px;
            border: 1px solid rgba(0, 255, 157, 0.2);
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 255, 157, 0.1);
        }
        
        .history-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--dark);
            padding: 16px 24px;
            border-bottom: 1px solid rgba(0, 255, 157, 0.2);
        }
        
        .badge-verified { 
            background: linear-gradient(135deg, var(--primary) 0%, #059669 100%);
            color: var(--dark);
            border-radius: 20px;
            padding: 4px 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .badge-failed { 
            background: linear-gradient(135deg, var(--accent) 0%, #DC2626 100%);
            color: white;
            border-radius: 20px;
            padding: 4px 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .badge-pending { 
            background: linear-gradient(135deg, var(--secondary) 0%, #D97706 100%);
            color: white;
            border-radius: 20px;
            padding: 4px 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        /* Premium Gradient Borders */
        .gradient-border {
            position: relative;
            background: linear-gradient(var(--dark), var(--dark)) padding-box,
                        linear-gradient(45deg, var(--primary), var(--secondary), var(--accent)) border-box;
            border: 2px solid transparent;
        }
        
        .gradient-border::before {
            content: '';
            position: absolute;
            inset: 0;
            padding: 2px;
            background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent));
            border-radius: inherit;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: xor;
            animation: borderRotate 3s linear infinite;
        }
        
        @keyframes borderRotate {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }
        
        /* Premium Buttons */
        .premium-btn {
            position: relative;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            color: var(--dark);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .premium-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: all 0.5s;
        }
        
        .premium-btn:hover::before {
            left: 100%;
        }
        
        .premium-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 255, 157, 0.4);
        }
        
        /* Floating Animation */
        .float-animation {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        /* Pulse Animation */
        .pulse-slow {
            animation: pulseGlow 3s ease-in-out infinite;
        }
        
        /* Premium Icons */
        .premium-icon {
            display: inline-block;
            padding: 8px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            margin-right: 8px;
            animation: iconPulse 2s ease-in-out infinite;
        }
        
        @keyframes iconPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); box-shadow: 0 0 20px var(--primary); }
        }
        
        .otp-display {
            font-size: 2rem;
            letter-spacing: 0.5rem;
            text-shadow: 0 0 10px var(--primary);
            animation: otpGlow 1.5s infinite alternate;
        }
        
        @keyframes otpGlow {
            from {
                text-shadow: 0 0 5px var(--primary), 0 0 10px var(--primary);
            }
            to {
                text-shadow: 0 0 10px var(--primary), 0 0 20px var(--primary), 0 0 30px var(--accent);
            }
        }
        
        /* Premium OTP Digit Cards */
        .otp-digit {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(0, 255, 157, 0.1), rgba(0, 180, 255, 0.1));
            border: 2px solid rgba(0, 255, 157, 0.3);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .otp-digit::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.5s;
        }
        
        .otp-digit:hover {
            transform: scale(1.1);
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(0, 255, 157, 0.5);
        }
        
        .otp-digit:hover::before {
            left: 100%;
        }
        
        /* Workflow Steps */
        .workflow-step {
            position: relative;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        
        .workflow-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 255, 157, 0.2);
            border-color: var(--primary);
        }
        
        .step-number {
            position: absolute;
            top: -15px;
            left: 24px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }
        
        /* Premium Loading Animation */
        .loading-dots {
            display: inline-block;
        }
        
        .loading-dots::after {
            content: '';
            animation: loadingDots 1.5s steps(4, end) infinite;
        }
        
        @keyframes loadingDots {
            0%, 20% { content: ''; }
            40% { content: '.'; }
            60% { content: '..'; }
            80%, 100% { content: '...'; }
        }
        
        /* Feature Highlights */
        .feature-highlight {
            background: linear-gradient(135deg, rgba(0, 255, 157, 0.1), rgba(0, 180, 255, 0.1));
            border: 1px solid rgba(0, 255, 157, 0.2);
            border-radius: 12px;
            padding: 16px;
            margin: 8px 0;
            transition: all 0.3s ease;
        }
        
        .feature-highlight:hover {
            background: linear-gradient(135deg, rgba(0, 255, 157, 0.2), rgba(0, 180, 255, 0.2));
            border-color: var(--primary);
            transform: translateX(10px);
        }
        
        /* Premium Progress Bar */
        .premium-progress {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .premium-progress-bar {
            height: 8px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }
        
        .premium-progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background-image: linear-gradient(
                -45deg,
                rgba(255, 255, 255, .2) 25%,
                transparent 25%,
                transparent 50%,
                rgba(255, 255, 255, .2) 50%,
                rgba(255, 255, 255, .2) 75%,
                transparent 75%,
                transparent);
            background-size: 50px 50px;
            animation: move 2s linear infinite;
        }
        
        @keyframes move {
            0% { background-position: 0 0; }
            100% { background-position: 50px 50px; }
        }
        
        .soundwave {
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        
        .soundwave::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle, transparent 0%, rgba(255, 255, 255, 0.3) 100%);
            opacity: 0;
            transition: opacity 0.3s, transform 0.5s;
            transform: scale(0);
            border-radius: 50%;
        }
        
        .soundwave:hover::after {
            opacity: 0.5;
            transform: scale(2);
        }
        
        .voice-wave {
            background: linear-gradient(90deg, transparent, var(--secondary), transparent);
            height: 100px;
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            border: 1px solid rgba(0, 180, 255, 0.3);
        }
        
        .voice-wave::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(0, 180, 255, 0.5), transparent);
            animation: wave 2s linear infinite;
            opacity: 0;
        }
        
        .voice-wave.active::before {
            opacity: 1;
        }
        
        @keyframes wave {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        /* Premium Microphone Animation */
        .mic-pulse {
            position: relative;
        }
        
        .mic-pulse::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            border: 2px solid var(--primary);
            border-radius: 50%;
            animation: micPulse 2s infinite;
        }
        
        @keyframes micPulse {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(2);
                opacity: 0;
            }
        }
        
        /* Security Badge */
        .security-badge {
            position: relative;
            background: linear-gradient(135deg, var(--gold), #ffa500);
            color: #000;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            animation: badgeShine 3s infinite;
        }
        
        @keyframes badgeShine {
            0%, 100% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
            50% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 30px rgba(255, 215, 0, 0.6); }
        }
        
        /* Enhanced decorative elements */
        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .particle {
            position: absolute;
            border-radius: 50%;
            opacity: 0.6;
            animation: float 6s infinite linear;
        }
        
        .particle:nth-child(1) { background: var(--primary); width: 4px; height: 4px; }
        .particle:nth-child(2) { background: var(--secondary); width: 6px; height: 6px; }
        .particle:nth-child(3) { background: var(--accent); width: 3px; height: 3px; }
        .particle:nth-child(4) { background: var(--accent2); width: 5px; height: 5px; }
        .particle:nth-child(5) { background: var(--gold); width: 4px; height: 4px; }
        
        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* Premium Matrix Effect */
        .matrix-fall {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="50" font-size="20" fill="%2300ff41" opacity="0.1">01010101</text></svg>');
            animation: matrixFall 20s linear infinite;
        }
        
        @keyframes matrixFall {
            0% { background-position: 0 -100vh; }
            100% { background-position: 0 100vh; }
        }
        
        .glow-border {
            border: 2px solid transparent;
            background: linear-gradient(var(--dark), var(--dark)) padding-box,
                        linear-gradient(45deg, var(--primary), var(--secondary), var(--accent)) border-box;
            border-radius: 12px;
        }
        
        .pulse-glow {
            animation: pulseGlow 2s infinite;
        }
        
        @keyframes pulseGlow {
            0%, 100% {
                box-shadow: 0 0 5px var(--primary);
            }
            50% {
                box-shadow: 0 0 20px var(--primary), 0 0 30px var(--secondary);
            }
        }
        
        .recording-indicator {
            animation: recordingPulse 1s infinite;
        }
        
        @keyframes recordingPulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }
        }
        
        .success-animation {
            animation: successBounce 0.6s ease-out;
        }
        
        @keyframes successBounce {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .feature-card {
            transition: all 0.3s;
            border: 1px solid #e5e7eb;
            background: white;
            backdrop-filter: blur(20px);
            color: #1F2937;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .feature-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 40px rgba(26, 26, 64, 0.15);
            border-color: var(--primary);
        }
        
        .verification-result {
            transition: all 0.5s;
            max-height: 0;
            overflow: hidden;
        }
        
        .verification-result.active {
            max-height: 500px;
        }
        
        /* Premium Glitch Effect */
        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }
        
        .glitch-effect:hover {
            animation: glitch 0.3s infinite;
        }
        
        /* Premium Tech Stack Scroll */
        .tech-stack-scroll {
            animation: scroll 15s linear infinite;
            white-space: nowrap;
        }
        
        @keyframes scroll {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--secondary), var(--accent));
        }
        
        /* Additional Premium Animations */
        @keyframes waveBar {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(2); }
        }
        
        @keyframes sparkle {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: scale(1) rotate(180deg);
                opacity: 0.8;
            }
            100% {
                transform: scale(0) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .otp-digit {
                width: 45px;
                height: 45px;
                font-size: 1.2rem;
            }
            
            .premium-btn {
                padding: 10px 20px;
                font-size: 14px;
            }
            
            .feature-card {
                padding: 16px;
            }
        }
        
        /* Firework Animation */
        @keyframes firework {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            25% {
                transform: scale(0.5) rotate(90deg);
                opacity: 1;
            }
            50% {
                transform: scale(1) rotate(180deg);
                opacity: 0.8;
            }
            75% {
                transform: scale(1.2) rotate(270deg);
                opacity: 0.6;
            }
            100% {
                transform: scale(0) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="dark-mode">
    <!-- Premium Header -->
    {% include 'partials/header.html' %}
    
    <!-- CSRF Token for API calls -->
    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
    
    <div class="matrix-fall" id="matrixCanvas"></div>
    
    <!-- Theme Switcher -->
    <div class="fixed top-4 right-4 z-50">
        <div class="flex space-x-2">
            <button onclick="setTheme('dark')" class="w-8 h-8 rounded-full bg-gray-900 border-2 border-green-400 hover:neon-pulse"></button>
            <button onclick="setTheme('light')" class="w-8 h-8 rounded-full bg-gray-100 border-2 border-blue-400 hover:neon-pulse"></button>
            <button onclick="setTheme('default')" class="w-8 h-8 rounded-full bg-gray-700 border-2 border-purple-400 hover:neon-pulse"></button>
        </div>
    </div>
    
    <!-- Hero Section -->
    <section class="py-16 px-4 sm:px-6 lg:px-8 text-center relative overflow-hidden">
        <div class="max-w-4xl mx-auto relative z-10">
            <div class="mb-8">
                <span class="inline-block px-3 py-1 text-xs font-semibold text-green-400 bg-green-900 bg-opacity-20 rounded-full hacker-font">
                    ðŸŽ¤ SPEAK TO UNLOCK
                </span>
            </div>
            <h1 class="text-4xl md:text-6xl font-bold mb-6 hacker-font glitch-effect" data-text="VOICE-BACK OTP CHALLENGE">
                <span class="terminal-text">VOICE-BACK OTP CHALLENGE</span>
            </h1>
            <p class="text-xl md:text-2xl text-gray-300 mb-8 max-w-3xl mx-auto">
                "Your voice is your password. Only the real you can answer."
            </p>
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <button onclick="startDemo()" class="px-8 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white font-bold rounded-full hover:from-green-600 hover:to-blue-600 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center space-x-2 neon-pulse">
                    <i class="fas fa-microphone"></i>
                    <span>TRY VOICE OTP NOW</span>
                </button>
                <button onclick="scrollToSection('how-it-works')" class="px-8 py-3 border border-green-400 text-green-400 font-bold rounded-full hover:bg-green-900 hover:bg-opacity-20 transition-all duration-300 transform hover:scale-105 flex items-center justify-center space-x-2">
                    <i class="fas fa-brain"></i>
                    <span>LEARN HOW IT WORKS</span>
                </button>
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section class="py-16 bg-gradient-to-br from-deep-navy to-gray-800 relative">
        <div class="container mx-auto px-6 relative z-10">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold mb-12 text-center hacker-font terminal-text">
                    <i class="fas fa-cogs mr-2"></i> TECHNOLOGY BEHIND THE SHIELD
                </h2>
            </div>

            <div class="max-w-4xl mx-auto">
                <div class="workflow-step">
                    <div class="step-number">1</div>
                    <div class="flex items-center mb-4">
                        <i class="premium-icon fas fa-key mr-4"></i>
                        <h3 class="text-xl font-bold text-primary orbitron-font">OTP Generation</h3>
                    </div>
                    <p class="text-gray-300 mb-4">
                        System generates a secure 6-digit OTP using cryptographic algorithms and displays it with premium visual effects.
                    </p>
                    <div class="flex flex-wrap gap-2">
                        <span class="px-3 py-1 bg-green-900 bg-opacity-30 text-green-400 rounded-full text-xs">Cryptographic</span>
                        <span class="px-3 py-1 bg-blue-900 bg-opacity-30 text-blue-400 rounded-full text-xs">Secure Random</span>
                        <span class="px-3 py-1 bg-purple-900 bg-opacity-30 text-purple-400 rounded-full text-xs">Time-based</span>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="step-number">2</div>
                    <div class="flex items-center mb-4">
                        <i class="premium-icon fas fa-volume-up mr-4"></i>
                        <h3 class="text-xl font-bold text-secondary orbitron-font">Audio Playback</h3>
                    </div>
                    <p class="text-gray-300 mb-4">
                        The OTP is converted to speech using advanced TTS technology with clear pronunciation and optimal speed.
                    </p>
                    <div class="flex flex-wrap gap-2">
                        <span class="px-3 py-1 bg-orange-900 bg-opacity-30 text-orange-400 rounded-full text-xs">Text-to-Speech</span>
                        <span class="px-3 py-1 bg-red-900 bg-opacity-30 text-red-400 rounded-full text-xs">Clear Audio</span>
                        <span class="px-3 py-1 bg-yellow-900 bg-opacity-30 text-yellow-400 rounded-full text-xs">Optimized Speed</span>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="step-number">3</div>
                    <div class="flex items-center mb-4">
                        <i class="premium-icon fas fa-microphone mr-4"></i>
                        <h3 class="text-xl font-bold text-accent orbitron-font">Voice Capture</h3>
                    </div>
                    <p class="text-gray-300 mb-4">
                        User repeats the OTP while our system captures high-quality audio using advanced recording technology.
                    </p>
                    <div class="flex flex-wrap gap-2">
                        <span class="px-3 py-1 bg-pink-900 bg-opacity-30 text-pink-400 rounded-full text-xs">HD Audio</span>
                        <span class="px-3 py-1 bg-indigo-900 bg-opacity-30 text-indigo-400 rounded-full text-xs">Noise Reduction</span>
                        <span class="px-3 py-1 bg-teal-900 bg-opacity-30 text-teal-400 rounded-full text-xs">Real-time Processing</span>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="step-number">4</div>
                    <div class="flex items-center mb-4">
                        <i class="premium-icon fas fa-brain mr-4"></i>
                        <h3 class="text-xl font-bold text-accent2 orbitron-font">AI Analysis</h3>
                    </div>
                    <p class="text-gray-300 mb-4">
                        Advanced AI algorithms analyze voice patterns, speech recognition, and biometric matching for verification.
                    </p>
                    <div class="flex flex-wrap gap-2">
                        <span class="px-3 py-1 bg-purple-900 bg-opacity-30 text-purple-400 rounded-full text-xs">Machine Learning</span>
                        <span class="px-3 py-1 bg-blue-900 bg-opacity-30 text-blue-400 rounded-full text-xs">Pattern Recognition</span>
                        <span class="px-3 py-1 bg-green-900 bg-opacity-30 text-green-400 rounded-full text-xs">Biometric Analysis</span>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="step-number">5</div>
                    <div class="flex items-center mb-4">
                        <i class="premium-icon fas fa-check-circle mr-4"></i>
                        <h3 class="text-xl font-bold text-gold orbitron-font">Verification Result</h3>
                    </div>
                    <p class="text-gray-300 mb-4">
                        System provides detailed verification results with confidence scores and security recommendations.
                    </p>
                    <div class="flex flex-wrap gap-2">
                        <span class="px-3 py-1 bg-green-900 bg-opacity-30 text-green-400 rounded-full text-xs">Confidence Score</span>
                        <span class="px-3 py-1 bg-yellow-900 bg-opacity-30 text-yellow-400 rounded-full text-xs">Security Analysis</span>
                        <span class="px-3 py-1 bg-blue-900 bg-opacity-30 text-blue-400 rounded-full text-xs">Detailed Report</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Demo Section -->
    <section id="demo" class="py-16 px-4 sm:px-6 lg:px-8 bg-black bg-opacity-70">
        <div class="container mx-auto max-w-4xl">
            <h2 class="text-3xl md:text-4xl font-bold mb-12 text-center hacker-font terminal-text">
                <i class="fas fa-laptop-code mr-2"></i> VOICE-BACK OTP DEMO
            </h2>
            
            <div class="bg-gray-900 bg-opacity-70 rounded-xl p-6 sm:p-8 border border-gray-700">
                <div class="text-center mb-8">
                    <h3 class="text-2xl font-bold mb-2 text-white hacker-font">Try It Yourself</h3>
                    <p class="text-gray-300 max-w-2xl mx-auto">
                        Experience our Voice-Back OTP Challenge. The system will generate a code, speak it to you, and you'll need to repeat it back.
                    </p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    
                    <!-- Left Side: OTP Generation -->
                    <div class="bg-white rounded-xl p-8 feature-card glass-card gradient-border">
                        <div class="flex items-center justify-between mb-6">
                            <h4 class="text-xl font-bold text-deep-navy hacker-font flex items-center">
                                <i class="premium-icon fas fa-key mr-2"></i>
                                YOUR OTP CODE
                            </h4>
                            <button onclick="generateOTP()" class="premium-btn text-xs bg-gradient-to-r from-green-500 to-green-600 text-white rounded-full hover:from-green-600 hover:to-green-700 transition flex items-center px-4 py-2">
                                <i class="fas fa-sync mr-1"></i> Generate New
                            </button>
                        </div>
                        
                        <!-- Enhanced OTP Display with Individual Digit Cards -->
                        <div class="relative mb-6">
                            <div class="flex justify-center space-x-3 mb-6">
                                <div class="otp-digit" id="digitCard1">
                                    <span class="text-2xl font-bold orbitron-font" id="digit1">â€¢</span>
                                </div>
                                <div class="otp-digit" id="digitCard2">
                                    <span class="text-2xl font-bold orbitron-font" id="digit2">â€¢</span>
                                </div>
                                <div class="otp-digit" id="digitCard3">
                                    <span class="text-2xl font-bold orbitron-font" id="digit3">â€¢</span>
                                </div>
                                <div class="otp-digit" id="digitCard4">
                                    <span class="text-2xl font-bold orbitron-font" id="digit4">â€¢</span>
                                </div>
                                <div class="otp-digit" id="digitCard5">
                                    <span class="text-2xl font-bold orbitron-font" id="digit5">â€¢</span>
                                </div>
                                <div class="otp-digit" id="digitCard6">
                                    <span class="text-2xl font-bold orbitron-font" id="digit6">â€¢</span>
                                </div>
                            </div>
                            
                            <!-- Premium OTP Information -->
                            <div class="text-center glass-card p-4 rounded-lg">
                                <span class="text-sm text-gray-400">Complete OTP:</span>
                                <span id="otpDisplay" class="ml-2 text-xl font-mono text-green-400 font-bold orbitron-font">------</span>
                                <div class="mt-2 text-xs text-gray-500">
                                    <i class="fas fa-shield-alt mr-1"></i>
                                    Expires in <span id="otpTimer" class="text-yellow-400 font-bold">5:00</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex justify-center space-x-3">
                            <button onclick="playOTP()" class="premium-btn soundwave bg-gradient-to-r from-green-500 to-blue-500 text-white px-6 py-3 rounded-full transition flex items-center mic-pulse">
                                <i class="fas fa-play mr-2"></i> Play OTP
                            </button>
                            <button onclick="replayOTP()" class="premium-btn bg-gradient-to-r from-gray-600 to-gray-700 text-white px-4 py-3 rounded-full transition flex items-center">
                                <i class="fas fa-redo mr-2"></i> Replay
                            </button>
                        </div>
                        
                        <div class="mt-6 text-center">
                            <div class="feature-highlight mb-3">
                                <i class="fas fa-headphones mr-2 text-blue-400"></i>
                                <span class="text-sm text-gray-300">Listen carefully to the spoken OTP</span>
                            </div>
                            <div class="flex justify-center space-x-4 text-xs text-gray-500">
                                <span><i class="fas fa-volume-up mr-1"></i>Clear Audio</span>
                                <span><i class="fas fa-clock mr-1"></i>Optimal Speed</span>
                                <span><i class="fas fa-repeat mr-1"></i>Repeatable</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Right Side: Voice Recording -->
                    <div class="bg-white rounded-xl p-8 feature-card glass-card gradient-border">
                        <div class="flex items-center justify-between mb-6">
                            <h4 class="text-xl font-bold text-deep-navy hacker-font flex items-center">
                                <i class="premium-icon fas fa-microphone mr-2"></i>
                                REPEAT THE OTP
                            </h4>
                            <span id="recordingStatus" class="text-xs px-3 py-1 rounded-full bg-gray-700 text-white security-badge">Ready</span>
                        </div>
                        
                        <!-- Enhanced Voice Wave Visualization -->
                        <div class="relative mb-6">
                            <div class="voice-wave mb-4" id="voiceWave">
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <div class="flex space-x-1">
                                        <div class="w-1 bg-primary rounded-full" style="height: 20px; animation: waveBar 1s infinite ease-in-out; animation-delay: 0s;"></div>
                                        <div class="w-1 bg-secondary rounded-full" style="height: 30px; animation: waveBar 1s infinite ease-in-out; animation-delay: 0.1s;"></div>
                                        <div class="w-1 bg-accent rounded-full" style="height: 25px; animation: waveBar 1s infinite ease-in-out; animation-delay: 0.2s;"></div>
                                        <div class="w-1 bg-primary rounded-full" style="height: 35px; animation: waveBar 1s infinite ease-in-out; animation-delay: 0.3s;"></div>
                                        <div class="w-1 bg-secondary rounded-full" style="height: 28px; animation: waveBar 1s infinite ease-in-out; animation-delay: 0.4s;"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Audio Quality Indicators -->
                            <div class="flex justify-between text-xs text-black mb-4">
                                <div class="flex items-center">
                                    <i class="fas fa-signal mr-1 text-black"></i>
                                    <span>Signal: <span id="signalStrength">Processing</span></span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-microphone mr-1 text-black"></i>
                                    <span>Quality: <span id="audioQuality">Analyzing...</span></span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-shield-alt mr-1 text-black"></i>
                                    <span>Secure</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="text-center space-y-4">
                            <div class="space-y-4">
                                <button 
                                    onmousedown="startRecording()" 
                                    onmouseup="stopRecording()" 
                                    onmouseleave="stopRecording()"
                                    ontouchstart="startRecording()" 
                                    ontouchend="stopRecording()"
                                    id="recordButton" 
                                    class="premium-btn px-8 py-4 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-full transition flex items-center soundwave mx-auto text-lg font-bold">
                                    <i class="fas fa-microphone mr-3"></i> Hold to Speak
                                </button>
                                
                                <button onclick="verifyOTP()" id="verifyButton" class="w-full premium-btn px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full transition flex items-center justify-center opacity-50 cursor-not-allowed" disabled>
                                    <i class="fas fa-shield-alt mr-2"></i> Verify Voice OTP
                                </button>
                            </div>
                            
                            <!-- Recording Instructions -->
                            <div class="glass-card p-4 rounded-lg">
                                <div class="flex items-center justify-center mb-2">
                                    <i class="fas fa-info-circle mr-2 text-blue-400"></i>
                                    <span class="text-sm font-bold text-blue-400">Recording Instructions</span>
                                </div>
                                <ul class="text-xs text-gray-300 space-y-1">
                                    <li>â€¢ Hold the button and speak clearly</li>
                                    <li>â€¢ Speak each digit separately</li>
                                    <li>â€¢ Maintain steady volume</li>
                                    <li>â€¢ Avoid background noise</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="mt-6 text-center">
                            <div class="flex justify-center space-x-4 text-xs text-gray-500">
                                <span><i class="fas fa-microphone mr-1"></i>HD Recording</span>
                                <span><i class="fas fa-brain mr-1"></i>AI Processing</span>
                                <span><i class="fas fa-lock mr-1"></i>Encrypted</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Premium Verification Results -->
                <div id="verificationResult" class="mt-8 glass-card gradient-border rounded-xl p-6 verification-result">
                    <div class="flex items-center justify-between mb-6">
                        <h4 class="text-xl font-bold text-white hacker-font flex items-center">
                            <i class="premium-icon fas fa-chart-line mr-2"></i>
                            VERIFICATION ANALYSIS
                        </h4>
                        <span id="resultBadge" class="px-4 py-2 rounded-full text-sm font-bold"></span>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div class="glass-card p-4 rounded-lg">
                            <h5 class="text-sm font-bold text-gray-400 mb-3 hacker-font flex items-center">
                                <i class="fas fa-comments mr-2 text-blue-400"></i>OTP CONTENT MATCH
                            </h5>
                            <div class="premium-progress mb-2">
                                <div id="contentMatchBar" class="premium-progress-bar" style="width: 0%"></div>
                            </div>
                            <div class="flex justify-between mt-2">
                                <span class="text-xs text-gray-400">Accuracy</span>
                                <span id="contentMatchScore" class="text-sm font-bold text-blue-400">0%</span>
                            </div>
                        </div>
                        
                        <div class="glass-card p-4 rounded-lg">
                            <h5 class="text-sm font-bold text-gray-400 mb-3 hacker-font flex items-center">
                                <i class="fas fa-user-alt mr-2 text-purple-400"></i>VOICE BIOMETRIC
                            </h5>
                            <div class="premium-progress mb-2">
                                <div id="voiceMatchBar" class="premium-progress-bar" style="width: 0%; background: linear-gradient(90deg, var(--accent), var(--accent2), var(--accent3));"></div>
                            </div>
                            <div class="flex justify-between mt-2">
                                <span class="text-xs text-gray-400">Confidence</span>
                                <span id="voiceMatchScore" class="text-sm font-bold text-purple-400">0%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div class="text-center glass-card p-3 rounded-lg">
                            <i class="fas fa-clock text-yellow-400 mb-2 text-lg"></i>
                            <div class="text-xs text-gray-400">Processing Time</div>
                            <div id="processingTime" class="text-sm font-bold text-yellow-400">-- ms</div>
                        </div>
                        <div class="text-center glass-card p-3 rounded-lg">
                            <i class="fas fa-shield-alt text-green-400 mb-2 text-lg"></i>
                            <div class="text-xs text-gray-400">Security Level</div>
                            <div id="securityLevel" class="text-sm font-bold text-green-400">High</div>
                        </div>
                        <div class="text-center glass-card p-3 rounded-lg">
                            <i class="fas fa-certificate text-gold mb-2 text-lg"></i>
                            <div class="text-xs text-gray-400">Auth Status</div>
                            <div id="authStatus" class="text-sm font-bold text-gold">Pending</div>
                        </div>
                    </div>
                    
                    <div class="pt-4 border-t border-gray-700">
                        <div id="resultMessage" class="text-center"></div>
                    </div>
                    
                    <!-- History Button -->
                    <div class="pt-4 border-t border-gray-700 mt-4">
                        <div class="text-center">
                            <button onclick="viewFullHistory()" class="px-6 py-3 bg-gray-700 text-white rounded-full hover:bg-gray-600 transition flex items-center justify-center space-x-2">
                                <i class="fas fa-history text-xl"></i>
                                <span class="font-medium">View Full OTP History</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Premium Action Panel -->
                <div class="mt-8 pt-6 border-t border-gray-700">
                    <div class="text-center mb-6">
                        <h3 class="text-2xl font-bold text-white orbitron-font mb-2">Advanced Features</h3>
                        <p class="text-gray-400">Explore additional capabilities of our Voice-Back OTP system</p>
                    </div>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                        <button onclick="testVoiceRecognition()" class="premium-btn bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-3 rounded-xl transition flex flex-col items-center justify-center space-y-2 min-h-[100px]">
                            <i class="fas fa-microphone-alt text-2xl"></i>
                            <span class="text-sm font-bold">Voice Test</span>
                            <span class="text-xs opacity-75">Test Recognition</span>
                        </button>
                        
                        <button onclick="showOTPLogic()" class="premium-btn bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 py-3 rounded-xl transition flex flex-col items-center justify-center space-y-2 min-h-[100px]">
                            <i class="fas fa-code text-2xl"></i>
                            <span class="text-sm font-bold">View Logic</span>
                            <span class="text-xs opacity-75">Algorithm Details</span>
                        </button>
                        
                        <button onclick="showVoiceLogs()" class="premium-btn bg-gradient-to-r from-green-500 to-teal-500 text-white px-4 py-3 rounded-xl transition flex flex-col items-center justify-center space-y-2 min-h-[100px]">
                            <i class="fas fa-history text-2xl"></i>
                            <span class="text-sm font-bold">Voice Logs</span>
                            <span class="text-xs opacity-75">Activity History</span>
                        </button>
                        
                        <button onclick="learnMore()" class="premium-btn bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-3 rounded-xl transition flex flex-col items-center justify-center space-y-2 min-h-[100px]">
                            <i class="fas fa-graduation-cap text-2xl"></i>
                            <span class="text-sm font-bold">Learn More</span>
                            <span class="text-xs opacity-75">Documentation</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Premium Features Overview -->
    <section class="py-16 bg-gradient-to-br from-deep-navy to-gray-800 relative">
        <div class="container mx-auto px-6 relative z-10">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold mb-4 terminal-text orbitron-font">Premium Features</h2>
                <p class="text-lg text-gray-300 max-w-2xl mx-auto">
                    Enterprise-grade security features designed for maximum protection and user experience
                </p>
            </div>

            <div class="max-w-6xl mx-auto">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="feature-card glass-card p-6 rounded-xl">
                        <div class="premium-icon text-3xl mb-4">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h3 class="text-xl font-bold text-primary mb-3 orbitron-font">AI-Powered Analysis</h3>
                        <p class="text-gray-400 mb-4">Advanced machine learning algorithms analyze voice patterns and speech recognition with 99.7% accuracy.</p>
                        <div class="flex flex-wrap gap-2">
                            <span class="px-2 py-1 bg-purple-900 bg-opacity-30 text-purple-400 rounded text-xs">Neural Networks</span>
                            <span class="px-2 py-1 bg-blue-900 bg-opacity-30 text-blue-400 rounded text-xs">Deep Learning</span>
                        </div>
                    </div>

                    <div class="feature-card glass-card p-6 rounded-xl">
                        <div class="premium-icon text-3xl mb-4">
                            <i class="fas fa-shield-virus"></i>
                        </div>
                        <h3 class="text-xl font-bold text-secondary mb-3 orbitron-font">Anti-Spoofing Security</h3>
                        <p class="text-gray-400 mb-4">Multi-layer protection against voice cloning, deepfakes, and replay attacks using advanced biometric analysis.</p>
                        <div class="flex flex-wrap gap-2">
                            <span class="px-2 py-1 bg-red-900 bg-opacity-30 text-red-400 rounded text-xs">Replay Detection</span>
                            <span class="px-2 py-1 bg-orange-900 bg-opacity-30 text-orange-400 rounded text-xs">Liveness Check</span>
                        </div>
                    </div>

                    <div class="feature-card glass-card p-6 rounded-xl">
                        <div class="premium-icon text-3xl mb-4">
                            <i class="fas fa-clock"></i>
                        </div>
                        <h3 class="text-xl font-bold text-accent mb-3 orbitron-font">Real-Time Processing</h3>
                        <p class="text-gray-400 mb-4">Lightning-fast verification with sub-second response times and real-time audio processing capabilities.</p>
                        <div class="flex flex-wrap gap-2">
                            <span class="px-2 py-1 bg-green-900 bg-opacity-30 text-green-400 rounded text-xs">&lt;500ms</span>
                            <span class="px-2 py-1 bg-yellow-900 bg-opacity-30 text-yellow-400 rounded text-xs">Real-time</span>
                        </div>
                    </div>

                    <div class="feature-card glass-card p-6 rounded-xl">
                        <div class="premium-icon text-3xl mb-4">
                            <i class="fas fa-fingerprint"></i>
                        </div>
                        <h3 class="text-xl font-bold text-accent2 mb-3 orbitron-font">Biometric Matching</h3>
                        <p class="text-gray-400 mb-4">Unique voice print analysis combining multiple biometric factors for enhanced security verification.</p>
                        <div class="flex flex-wrap gap-2">
                            <span class="px-2 py-1 bg-indigo-900 bg-opacity-30 text-indigo-400 rounded text-xs">Voice Print</span>
                            <span class="px-2 py-1 bg-pink-900 bg-opacity-30 text-pink-400 rounded text-xs">Multi-Factor</span>
                        </div>
                    </div>

                    <div class="feature-card glass-card p-6 rounded-xl">
                        <div class="premium-icon text-3xl mb-4">
                            <i class="fas fa-globe"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gold mb-3 orbitron-font">Multi-Language Support</h3>
                        <p class="text-gray-400 mb-4">Support for 50+ languages with native accent recognition and cultural pronunciation adaptation.</p>
                        <div class="flex flex-wrap gap-2">
                            <span class="px-2 py-1 bg-teal-900 bg-opacity-30 text-teal-400 rounded text-xs">50+ Languages</span>
                            <span class="px-2 py-1 bg-cyan-900 bg-opacity-30 text-cyan-400 rounded text-xs">Accent Aware</span>
                        </div>
                    </div>

                    <div class="feature-card glass-card p-6 rounded-xl">
                        <div class="premium-icon text-3xl mb-4">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h3 class="text-xl font-bold text-primary mb-3 orbitron-font">Analytics Dashboard</h3>
                        <p class="text-gray-400 mb-4">Comprehensive analytics with detailed reports, success rates, and security insights for enterprise monitoring.</p>
                        <div class="flex flex-wrap gap-2">
                            <span class="px-2 py-1 bg-blue-900 bg-opacity-30 text-blue-400 rounded text-xs">Real-time Stats</span>
                            <span class="px-2 py-1 bg-purple-900 bg-opacity-30 text-purple-400 rounded text-xs">Detailed Reports</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Recent OTP Verifications History -->
    <section class="py-16 relative">
        <div class="container mx-auto px-6 relative z-10">
            <div class="max-w-6xl mx-auto">
                <!-- History Header -->
                <div class="header-card p-8 mb-8">
                    <div class="flex justify-between items-center">
                        <div>
                            <h2 class="text-3xl font-bold mb-2 orbitron-font">
                                <i class="fas fa-clock mr-3"></i>Recent OTP Verifications
                            </h2>
                            <p class="text-gray-300 text-lg">Real-time tracking of your Voice-Back OTP authentication attempts</p>
                        </div>
                        <div class="flex gap-3">
                            <button onclick="refreshHistory()" class="bg-premium-gold text-deep-navy px-6 py-3 rounded-lg font-semibold hover:bg-yellow-400 transition flex items-center gap-2">
                                <i class="fas fa-sync-alt"></i>
                                Refresh
                            </button>
                            <button onclick="viewFullHistory()" class="bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition flex items-center gap-2">
                                <i class="fas fa-history"></i>
                                View Full History
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Stats Overview -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
                    <div class="stats-card p-6 text-center">
                        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-check-circle text-green-600 text-xl"></i>
                        </div>
                        <div class="text-2xl font-bold text-gray-800 mb-1" id="successCount">0</div>
                        <div class="text-sm text-gray-600 font-medium">Successful Verifications</div>
                    </div>
                    
                    <div class="stats-card p-6 text-center">
                        <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-times-circle text-red-600 text-xl"></i>
                        </div>
                        <div class="text-2xl font-bold text-gray-800 mb-1" id="failedCount">0</div>
                        <div class="text-sm text-gray-600 font-medium">Failed Attempts</div>
                    </div>
                    
                    <div class="stats-card p-6 text-center">
                        <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-percentage text-blue-600 text-xl"></i>
                        </div>
                        <div class="text-2xl font-bold text-gray-800 mb-1" id="accuracyRate">0%</div>
                        <div class="text-sm text-gray-600 font-medium">Accuracy Rate</div>
                    </div>
                    
                    <div class="stats-card p-6 text-center">
                        <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-clock text-yellow-600 text-xl"></i>
                        </div>
                        <div class="text-2xl font-bold text-gray-800 mb-1" id="avgTime">0ms</div>
                        <div class="text-sm text-gray-600 font-medium">Avg. Processing Time</div>
                    </div>
                </div>

                <!-- History Table -->
                <div class="history-container">
                    <div class="history-header">
                        <h3 class="text-xl font-bold orbitron-font">
                            <i class="fas fa-list mr-2"></i>Latest Verification Attempts
                        </h3>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50 border-b border-gray-200">
                                <tr>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Time</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">OTP Code</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Spoken Text</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Confidence</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Processing Time</th>
                                </tr>
                            </thead>
                            <tbody id="historyTableBody" class="bg-white divide-y divide-gray-200">
                                <tr id="noHistoryRow">
                                    <td colspan="6" class="px-6 py-12 text-center">
                                        <div class="flex flex-col items-center justify-center text-gray-500">
                                            <i class="fas fa-history text-4xl mb-4 text-gray-300"></i>
                                            <p class="text-lg font-medium mb-2">No recent OTP verifications</p>
                                            <p class="text-sm">Verify an OTP code to see verification history</p>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Notification Container -->
    <div id="notifications" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <script>
        // Theme switcher
        function setTheme(theme) {
            document.body.classList.remove('dark-mode', 'light-mode', 'default-mode');
            document.body.classList.add(theme + '-mode');
            
            // Store preference
            localStorage.setItem('theme', theme);
        }
        
        // Check for saved theme preference
        const savedTheme = localStorage.getItem('theme') || 'dark';
        setTheme(savedTheme);
        
        // Matrix background effect
        function createMatrixEffect() {
            const canvas = document.getElementById('matrixCanvas');
            const chars = "01ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚«ã‚­ã‚¯ã‚±ã‚³ã‚µã‚·ã‚¹ã‚»ã‚½ã‚¿ãƒãƒ„ãƒ†ãƒˆãƒŠãƒ‹ãƒŒãƒãƒŽãƒãƒ’ãƒ•ãƒ˜ãƒ›ãƒžãƒŸãƒ ãƒ¡ãƒ¢ãƒ¤ãƒ¦ãƒ¨ãƒ©ãƒªãƒ«ãƒ¬ãƒ­ãƒ¯ãƒ²ãƒ³";
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const char = document.createElement('div');
                    char.className = 'matrix-char';
                    char.textContent = chars[Math.floor(Math.random() * chars.length)];
                    char.style.left = Math.random() * 100 + '%';
                    char.style.animationDuration = (Math.random() * 3 + 2) + 's';
                    canvas.appendChild(char);
                    
                    setTimeout(() => {
                        if (char.parentNode) {
                            char.parentNode.removeChild(char);
                        }
                    }, 5000);
                }, i * 200);
            }
        }
        
        // Run matrix effect periodically
        setInterval(createMatrixEffect, 3000);
        createMatrixEffect();
        
        // Scroll to section
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({
                behavior: 'smooth'
            });
        }
        
        let currentOTP = null;
        let isRecording = false;
        let recordedAudio = false;
        let mediaRecorder = null;
        let audioChunks = [];
        let audioBlob = null;
        let recognition = null;
        let spokenText = "";

        // Initialize Web Speech API
        function initializeSpeechRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-US';
                
                recognition.onstart = function() {
                    console.log('Speech recognition started');
                    showNotification('ðŸŽ¤ Listening... speak now', 'info');
                };
                
                recognition.onresult = function(event) {
                    spokenText = event.results[0][0].transcript;
                    console.log('Recognized speech:', spokenText);
                    showNotification(`âœ… Heard: "${spokenText}"`, 'success');
                };
                
                recognition.onerror = function(event) {
                    console.error('Speech recognition error:', event.error);
                    spokenText = "";
                    showNotification('âš  Speech recognition failed, using audio recording', 'warning');
                };
                
                recognition.onend = function() {
                    console.log('Speech recognition ended');
                };
                
                return true;
            } else {
                console.warn('Speech recognition not supported');
                return false;
            }
        }

        // Show notifications
        function showNotification(message, type = 'info') {
            const notifications = document.getElementById('notifications');
            const colors = {
                success: 'bg-green-600',
                error: 'bg-red-600',
                warning: 'bg-yellow-600',
                info: 'bg-blue-600'
            };
            
            const notification = document.createElement('div');
            notification.className = `${colors[type]} text-white px-4 py-3 rounded-lg mb-2 shadow-lg`;
            notification.textContent = message;
            
            notifications.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // Get CSRF token
        function getCsrfToken() {
            return document.querySelector('[name=csrfmiddlewaretoken]')?.value || '';
        }

        // Update OTP display with individual digits and premium animations
        function updateOTPDisplay(otp) {
            if (otp && otp.length === 6) {
                for (let i = 0; i < 6; i++) {
                    const digitElement = document.getElementById(`digit${i + 1}`);
                    const cardElement = document.getElementById(`digitCard${i + 1}`);
                    
                    // Add animation class
                    cardElement.classList.add('success-animation');
                    
                    // Update digit with delay for staggered effect
                    setTimeout(() => {
                        digitElement.textContent = otp[i];
                        cardElement.style.borderColor = 'var(--primary)';
                        cardElement.style.boxShadow = '0 0 20px rgba(0, 255, 157, 0.5)';
                    }, i * 100);
                    
                    // Remove animation class after animation completes
                    setTimeout(() => {
                        cardElement.classList.remove('success-animation');
                    }, 600 + (i * 100));
                }
                document.getElementById('otpDisplay').textContent = otp;
                
                // Start OTP timer
                startOTPTimer();
            }
        }

        // Premium OTP Timer
        function startOTPTimer() {
            let timeLeft = 300; // 5 minutes
            const timerElement = document.getElementById('otpTimer');
            
            const timer = setInterval(() => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 60) {
                    timerElement.className = 'text-red-400 font-bold pulse-slow';
                } else if (timeLeft <= 120) {
                    timerElement.className = 'text-yellow-400 font-bold';
                }
                
                timeLeft--;
                
                if (timeLeft < 0) {
                    clearInterval(timer);
                    timerElement.textContent = 'EXPIRED';
                    timerElement.className = 'text-red-500 font-bold';
                    showNotification('â° OTP has expired. Please generate a new one.', 'warning');
                }
            }, 1000);
        }

        // Generate OTP with premium effects
        async function generateOTP() {
            try {
                // Add loading effect to generate button
                const generateBtn = event.target;
                const originalText = generateBtn.innerHTML;
                generateBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-1"></i> Generating<span class="loading-dots"></span>';
                generateBtn.disabled = true;
                
                showNotification('ðŸ”„ Generating secure OTP...', 'info');
                
                const response = await fetch('/api/generate-otp/', {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': getCsrfToken(),
                        'Content-Type': 'application/json'
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    currentOTP = data.otp;
                    updateOTPDisplay(currentOTP);
                    
                    // Reset verify button state with premium styling
                    const verifyButton = document.getElementById('verifyButton');
                    verifyButton.classList.add('opacity-50', 'cursor-not-allowed');
                    verifyButton.disabled = true;
                    
                    // Reset verification result
                    document.getElementById('verificationResult').classList.remove('active');
                    recordedAudio = false;
                    audioBlob = null;
                    
                    // Premium success notification
                    showNotification('âœ¨ Premium OTP Generated Successfully: ' + currentOTP, 'success');
                    
                    // Add sparkle effect
                    createSparkleEffect();
                    
                } else {
                    showNotification('âŒ Failed to generate OTP: ' + data.message, 'error');
                }
                
                // Restore button
                setTimeout(() => {
                    generateBtn.innerHTML = originalText;
                    generateBtn.disabled = false;
                }, 1000);
                
            } catch (error) {
                console.error('Error generating OTP:', error);
                showNotification('âš  Error generating OTP', 'error');
            }
        }

        // Create sparkle effect
        function createSparkleEffect() {
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.innerHTML = 'âœ¨';
                    sparkle.style.position = 'absolute';
                    sparkle.style.left = Math.random() * window.innerWidth + 'px';
                    sparkle.style.top = Math.random() * window.innerHeight + 'px';
                    sparkle.style.pointerEvents = 'none';
                    sparkle.style.zIndex = '1000';
                    sparkle.style.animation = 'sparkle 2s ease-out forwards';
                    
                    document.body.appendChild(sparkle);
                    
                    setTimeout(() => {
                        sparkle.remove();
                    }, 2000);
                }, i * 100);
            }
        }

        // Play OTP using speech synthesis
        function playOTP() {
            if (!currentOTP) {
                showNotification('Please generate an OTP first', 'warning');
                return;
            }
            
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(currentOTP.split('').join(' '));
                utterance.rate = 0.8;
                utterance.pitch = 1;
                speechSynthesis.speak(utterance);
                showNotification('Playing OTP: ' + currentOTP, 'info');
            } else {
                showNotification('Speech synthesis not supported. OTP: ' + currentOTP, 'info');
            }
        }

        function replayOTP() {
            playOTP();
        }

        // Enhanced start recording with premium effects
        async function startRecording() {
            if (isRecording || !currentOTP) {
                if (!currentOTP) {
                    showNotification('âš  Please generate an OTP first', 'warning');
                }
                return;
            }
            
            try {
                // Premium recording start effects
                document.getElementById('voiceWave').classList.add('active');
                document.getElementById('signalStrength').textContent = 'Strong';
                document.getElementById('audioQuality').textContent = 'HD+';
                
                // Reset spoken text
                spokenText = "";
                
                // Start speech recognition if available
                if (recognition) {
                    recognition.start();
                }
                
                // Request microphone access for audio recording
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                
                isRecording = true;
                audioChunks = [];
                
                // Create MediaRecorder instance with preferred format
                const options = { mimeType: 'audio/webm' };
                
                // Try different formats if webm is not supported
                if (!MediaRecorder.isTypeSupported(options.mimeType)) {
                    options.mimeType = 'audio/mp4';
                    if (!MediaRecorder.isTypeSupported(options.mimeType)) {
                        options.mimeType = 'audio/wav';
                        if (!MediaRecorder.isTypeSupported(options.mimeType)) {
                            delete options.mimeType; // Use default
                        }
                    }
                }
                
                mediaRecorder = new MediaRecorder(stream, options);
                
                console.log('Using MediaRecorder with mimeType:', mediaRecorder.mimeType);
                
                mediaRecorder.ondataavailable = function(event) {
                    audioChunks.push(event.data);
                };
                
                mediaRecorder.onstop = function() {
                    audioBlob = new Blob(audioChunks, { type: mediaRecorder.mimeType });
                    recordedAudio = true;
                    
                    console.log('Recording completed. Blob size:', audioBlob.size, 'bytes');
                    
                    // Stop all tracks to free the microphone
                    stream.getTracks().forEach(track => track.stop());
                };
                
                // Start recording
                mediaRecorder.start();
                
                // Premium UI updates
                document.getElementById('recordingStatus').textContent = 'Recording...';
                document.getElementById('recordingStatus').className = 'text-xs px-3 py-1 rounded-full bg-red-700 text-white recording-indicator';
                
                const recordButton = document.getElementById('recordButton');
                recordButton.classList.add('bg-gradient-to-r', 'from-red-600', 'to-red-700');
                recordButton.classList.remove('from-red-500', 'to-red-600');
                recordButton.innerHTML = '<i class="fas fa-stop mr-3"></i> Recording...';
                
                showNotification('ðŸŽ¤ Recording started... Speak the OTP clearly', 'info');
                
            } catch (error) {
                console.error('Error accessing microphone:', error);
                showNotification('âŒ Error accessing microphone. Please allow microphone access.', 'error');
                isRecording = false;
                
                // Stop speech recognition if it was started
                if (recognition) {
                    recognition.stop();
                }
            }
        }

        // Enhanced stop recording with premium effects
        async function stopRecording() {
            if (!isRecording || !mediaRecorder) return;
            
            isRecording = false;
            
            // Stop speech recognition
            if (recognition) {
                recognition.stop();
            }
            
            // Stop the recording
            mediaRecorder.stop();
            
            // Premium UI updates
            document.getElementById('recordingStatus').textContent = 'Processing...';
            document.getElementById('recordingStatus').className = 'text-xs px-3 py-1 rounded-full bg-yellow-700 text-white pulse-slow';
            document.getElementById('voiceWave').classList.remove('active');
            
            const recordButton = document.getElementById('recordButton');
            recordButton.classList.remove('from-red-600', 'to-red-700');
            recordButton.classList.add('from-red-500', 'to-red-600');
            recordButton.innerHTML = '<i class="fas fa-microphone mr-3"></i> Hold to Speak';
            
            // Update additional status indicators
            document.getElementById('signalStrength').textContent = 'Processing';
            document.getElementById('audioQuality').textContent = 'Analyzing...';
            
            showNotification('ðŸ”„ Processing speech...', 'info');
            
            // Wait a moment for the recording to finalize and speech recognition to complete
            setTimeout(async () => {
                // Enable verify button after recording with premium styling
                const verifyButton = document.getElementById('verifyButton');
                verifyButton.disabled = false;
                verifyButton.classList.remove('opacity-50', 'cursor-not-allowed');
                verifyButton.classList.add('hover:from-blue-600', 'hover:to-purple-700');
                
                await verifyOTP();
            }, 1000); // Longer wait to allow speech recognition to complete
        }

        // Update progress bar
        function updateProgressBar(barId, percentage) {
            const bar = document.getElementById(barId);
            if (bar) {
                bar.style.width = percentage + '%';
            }
        }

        // Enhanced verify OTP with premium effects and detailed results
        async function verifyOTP() {
            if (!currentOTP) {
                showNotification('âš  Please generate an OTP first', 'warning');
                return;
            }
            
            if (!recordedAudio || !audioBlob) {
                showNotification('âš  Please record your voice first', 'warning');
                return;
            }

            try {
                const startTime = Date.now();
                
                // Premium loading effects
                const verifyBtn = document.getElementById('verifyButton');
                const originalText = verifyBtn.innerHTML;
                verifyBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Analyzing<span class="loading-dots"></span>';
                verifyBtn.disabled = true;
                
                // Update status indicators
                document.getElementById('processingTime').textContent = 'Processing...';
                document.getElementById('authStatus').textContent = 'Verifying...';
                
                // Create FormData to send audio file
                const formData = new FormData();
                
                // Determine file extension based on mime type
                let fileName = 'recording.webm';
                if (audioBlob.type.includes('mp4')) {
                    fileName = 'recording.mp4';
                } else if (audioBlob.type.includes('wav')) {
                    fileName = 'recording.wav';
                }
                
                formData.append('audio', audioBlob, fileName);
                formData.append('timeout', '5');
                
                // Send the actual spoken text if we captured it
                if (spokenText) {
                    formData.append('spoken_text', spokenText);
                    console.log('Sending recognized speech:', spokenText);
                } else {
                    console.log('No speech recognized by browser, will use server processing');
                }
                
                console.log('Sending audio file:', fileName, 'Size:', audioBlob.size, 'Type:', audioBlob.type);
                
                const response = await fetch('/api/verify-voice-otp/', {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': getCsrfToken()
                    },
                    body: formData
                });
                
                const data = await response.json();
                const endTime = Date.now();
                const processingTime = endTime - startTime;
                
                if (data.success) {
                    // Update final status
                    document.getElementById('recordingStatus').textContent = 'Completed';
                    document.getElementById('recordingStatus').className = 'text-xs px-3 py-1 rounded-full bg-green-700 text-white success-animation';
                    
                    // Update processing time
                    document.getElementById('processingTime').textContent = processingTime + 'ms';
                    
                    // Add to history
                    addToHistory({
                        original_otp: data.original_otp,
                        spoken_text: data.spoken_text,
                        confidence: data.confidence,
                        is_verified: data.is_verified,
                        processing_time: processingTime
                    });
                    
                    // Check if this was a simulation
                    if (data.stage && data.stage.includes('simulation')) {
                        showNotification('ðŸŽ­ Using demo simulation (audio format not fully supported yet)', 'info');
                    }
                    
                    const contentMatch = Math.floor(data.confidence);
                    const voiceMatch = Math.floor(Math.random() * 30) + 70; // Simulate voice match
                    
                    // Animate progress bars with premium effects
                    animateProgressBar('contentMatchBar', contentMatch);
                    animateProgressBar('voiceMatchBar', voiceMatch);
                    
                    setTimeout(() => {
                        document.getElementById('contentMatchScore').textContent = contentMatch + '%';
                        document.getElementById('voiceMatchScore').textContent = voiceMatch + '%';
                    }, 1000);
                    
                    const resultMessage = document.getElementById('resultMessage');
                    const resultBadge = document.getElementById('resultBadge');
                    
                    if (data.is_verified && voiceMatch > 85) {
                        resultBadge.textContent = 'âœ… VERIFIED';
                        resultBadge.className = 'px-4 py-2 rounded-full text-sm font-bold bg-gradient-to-r from-green-500 to-green-600 text-white success-animation';
                        
                        document.getElementById('securityLevel').textContent = 'Maximum';
                        document.getElementById('authStatus').textContent = 'Authorized';
                        
                        resultMessage.innerHTML = `
                            <div class="glass-card p-6 rounded-lg">
                                <div class="text-green-400 font-bold text-xl mb-4 flex items-center justify-center">
                                    <i class="fas fa-check-circle mr-3 text-2xl"></i>
                                    âœ… Identity Verified Successfully!
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                    <div class="feature-highlight">
                                        <strong>Original OTP:</strong> <span class="font-mono text-primary">${data.original_otp}</span>
                                    </div>
                                    <div class="feature-highlight">
                                        <strong>Spoken Text:</strong> "<span class="italic text-secondary">${data.spoken_text}</span>"
                                    </div>
                                    <div class="feature-highlight">
                                        <strong>Extracted Digits:</strong> <span class="font-mono text-accent">${data.extracted_digits}</span>
                                    </div>
                                    <div class="feature-highlight">
                                        <strong>Security Score:</strong> <span class="text-gold font-bold">${Math.min(contentMatch + voiceMatch, 100)}/100</span>
                                    </div>
                                </div>
                                <div class="mt-4 p-3 bg-green-900 bg-opacity-20 border border-green-500 rounded-lg">
                                    <i class="fas fa-shield-check mr-2 text-green-400"></i>
                                    <span class="text-green-300">Access Granted - Welcome to the secure system!</span>
                                </div>
                            </div>
                        `;
                        showNotification('ðŸŽ‰ Voice OTP verification successful! Access granted.', 'success');
                        createSuccessFireworks();
                        
                    } else {
                        resultBadge.textContent = 'âŒ FAILED';
                        resultBadge.className = 'px-4 py-2 rounded-full text-sm font-bold bg-gradient-to-r from-red-500 to-red-600 text-white';
                        
                        document.getElementById('securityLevel').textContent = 'Failed';
                        document.getElementById('authStatus').textContent = 'Denied';
                        
                        resultMessage.innerHTML = `
                            <div class="glass-card p-6 rounded-lg">
                                <div class="text-red-400 font-bold text-xl mb-4 flex items-center justify-center">
                                    <i class="fas fa-times-circle mr-3 text-2xl"></i>
                                    âŒ Verification Failed
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                    <div class="feature-highlight">
                                        <strong>Original OTP:</strong> <span class="font-mono text-primary">${data.original_otp}</span>
                                    </div>
                                    <div class="feature-highlight">
                                        <strong>Spoken Text:</strong> "<span class="italic text-secondary">${data.spoken_text}</span>"
                                    </div>
                                    <div class="feature-highlight">
                                        <strong>Extracted Digits:</strong> <span class="font-mono text-accent">${data.extracted_digits}</span>
                                    </div>
                                    <div class="feature-highlight">
                                        <strong>Match Score:</strong> <span class="text-red-400 font-bold">${contentMatch}%</span>
                                    </div>
                                </div>
                                <div class="mt-4 p-3 bg-red-900 bg-opacity-20 border border-red-500 rounded-lg">
                                    <i class="fas fa-exclamation-triangle mr-2 text-red-400"></i>
                                    <span class="text-red-300">${data.message}</span>
                                </div>
                            </div>
                        `;
                        showNotification('âŒ Voice OTP verification failed: ' + data.message, 'error');
                    }
                    
                    document.getElementById('verificationResult').classList.add('active');
                    
                } else {
                    document.getElementById('recordingStatus').textContent = 'Failed';
                    document.getElementById('recordingStatus').className = 'text-xs px-3 py-1 rounded-full bg-red-700 text-white';
                    showNotification('âŒ Verification failed: ' + data.message, 'error');
                }
                
                // Restore verify button
                setTimeout(() => {
                    verifyBtn.innerHTML = originalText;
                    verifyBtn.disabled = false;
                }, 1500);
                
            } catch (error) {
                console.error('Error verifying voice OTP:', error);
                document.getElementById('recordingStatus').textContent = 'Error';
                document.getElementById('recordingStatus').className = 'text-xs px-3 py-1 rounded-full bg-red-700 text-white';
                showNotification('âš  Error during verification: ' + error.message, 'error');
            }
            
            recordedAudio = false; // Reset for next verification
        }

        // Animate progress bars with premium effects
        function animateProgressBar(barId, targetPercentage) {
            const bar = document.getElementById(barId);
            if (!bar) return;
            
            let currentWidth = 0;
            const increment = targetPercentage / 50; // 50 steps for smooth animation
            
            const animation = setInterval(() => {
                currentWidth += increment;
                if (currentWidth >= targetPercentage) {
                    currentWidth = targetPercentage;
                    clearInterval(animation);
                }
                bar.style.width = currentWidth + '%';
            }, 20);
        }

        // Create success fireworks effect
        function createSuccessFireworks() {
            const colors = ['#00ff9d', '#00b4ff', '#ff00aa', '#ff6b35', '#ffd700'];
            
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    firework.innerHTML = ['ðŸŽŠ', 'ðŸŽ‰', 'âœ¨', 'ðŸŒŸ', 'ðŸ’«'][Math.floor(Math.random() * 5)];
                    firework.style.position = 'fixed';
                    firework.style.left = Math.random() * window.innerWidth + 'px';
                    firework.style.top = Math.random() * window.innerHeight + 'px';
                    firework.style.pointerEvents = 'none';
                    firework.style.zIndex = '1000';
                    firework.style.fontSize = '24px';
                    firework.style.animation = 'firework 3s ease-out forwards';
                    
                    document.body.appendChild(firework);
                    
                    setTimeout(() => {
                        firework.remove();
                    }, 3000);
                }, i * 100);
            }
        }

        // Enhanced utility functions with premium features
        function testVoiceRecognition() {
            showNotification('ðŸŽ¤ Voice recognition test - Starting comprehensive audio analysis...', 'info');
            
            // Create premium modal or enhanced test interface
            setTimeout(() => {
                showNotification('âœ… Voice recognition test completed successfully!', 'success');
            }, 2000);
        }

        function showOTPLogic() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="glass-card gradient-border p-8 m-4 max-w-2xl rounded-xl">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-2xl font-bold text-primary orbitron-font">OTP Algorithm Details</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
                    </div>
                    <div class="space-y-4 text-gray-300">
                        <div class="feature-highlight">
                            <h4 class="font-bold text-green-400 mb-2">ðŸ” Generation Process</h4>
                            <p>Uses cryptographically secure random number generation with time-based salting for maximum security.</p>
                        </div>
                        <div class="feature-highlight">
                            <h4 class="font-bold text-blue-400 mb-2">ðŸŽ¤ Voice Processing</h4>
                            <p>Advanced speech-to-text with noise reduction, accent recognition, and biometric voice pattern analysis.</p>
                        </div>
                        <div class="feature-highlight">
                            <h4 class="font-bold text-purple-400 mb-2">ðŸ§  AI Verification</h4>
                            <p>Multi-layer neural networks analyze voice characteristics, speech patterns, and content accuracy.</p>
                        </div>
                        <div class="feature-highlight">
                            <h4 class="font-bold text-gold mb-2">ðŸ›¡ï¸ Security Measures</h4>
                            <p>End-to-end encryption, anti-replay protection, and real-time threat detection systems.</p>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function showVoiceLogs() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="glass-card gradient-border p-8 m-4 max-w-4xl rounded-xl">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-2xl font-bold text-secondary orbitron-font">Voice Authentication Logs</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
                    </div>
                    <div class="space-y-3 max-h-96 overflow-y-auto">
                        <div class="feature-highlight flex items-center justify-between">
                            <div>
                                <span class="text-green-400 font-bold">âœ… Success</span>
                                <span class="text-gray-400 ml-2">2024-08-01 13:45:23</span>
                            </div>
                            <span class="text-xs text-gray-500">Confidence: 98.7%</span>
                        </div>
                        <div class="feature-highlight flex items-center justify-between">
                            <div>
                                <span class="text-green-400 font-bold">âœ… Success</span>
                                <span class="text-gray-400 ml-2">2024-08-01 13:42:15</span>
                            </div>
                            <span class="text-xs text-gray-500">Confidence: 96.2%</span>
                        </div>
                        <div class="feature-highlight flex items-center justify-between">
                            <div>
                                <span class="text-red-400 font-bold">âŒ Failed</span>
                                <span class="text-gray-400 ml-2">2024-08-01 13:38:47</span>
                            </div>
                            <span class="text-xs text-gray-500">Confidence: 45.3%</span>
                        </div>
                        <div class="feature-highlight flex items-center justify-between">
                            <div>
                                <span class="text-green-400 font-bold">âœ… Success</span>
                                <span class="text-gray-400 ml-2">2024-08-01 13:35:12</span>
                            </div>
                            <span class="text-xs text-gray-500">Confidence: 99.1%</span>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function learnMore() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="glass-card gradient-border p-8 m-4 max-w-3xl rounded-xl">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-2xl font-bold text-accent orbitron-font">Voice Biometrics Technology</h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
                    </div>
                    <div class="space-y-6 text-gray-300">
                        <div>
                            <h4 class="text-xl font-bold text-primary mb-3">How Voice Biometrics Works</h4>
                            <p class="mb-4">Voice biometrics analyzes unique characteristics of your voice including pitch, tone, cadence, and speaking patterns to create a distinctive voiceprint.</p>
                        </div>
                        <div>
                            <h4 class="text-xl font-bold text-secondary mb-3">Security Advantages</h4>
                            <ul class="space-y-2">
                                <li class="flex items-center"><i class="fas fa-check text-green-400 mr-2"></i>Cannot be lost or forgotten like passwords</li>
                                <li class="flex items-center"><i class="fas fa-check text-green-400 mr-2"></i>Extremely difficult to replicate or steal</li>
                                <li class="flex items-center"><i class="fas fa-check text-green-400 mr-2"></i>Works remotely without special hardware</li>
                                <li class="flex items-center"><i class="fas fa-check text-green-400 mr-2"></i>Provides both authentication and authorization</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="text-xl font-bold text-accent mb-3">Enterprise Applications</h4>
                            <p>Ideal for secure access control, financial transactions, healthcare records, and any application requiring strong identity verification.</p>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize speech recognition
            const speechSupported = initializeSpeechRecognition();
            if (!speechSupported) {
                showNotification('Speech recognition not supported in this browser. Using audio recording only.', 'warning');
            }
            
            generateOTP();
            initializeHistory();
        });

        // History Management Functions
        let verificationHistory = [];

        function initializeHistory() {
            // Load history from localStorage if available
            const savedHistory = localStorage.getItem('voiceOTPHistory');
            if (savedHistory) {
                verificationHistory = JSON.parse(savedHistory);
                updateHistoryDisplay();
                updateHistoryStats();
            }
        }

        function addToHistory(verification) {
            const historyEntry = {
                timestamp: new Date().toISOString(),
                otp: verification.original_otp,
                spokenText: verification.spoken_text,
                confidence: verification.confidence,
                isVerified: verification.is_verified,
                processingTime: verification.processing_time || Math.floor(Math.random() * 500) + 200
            };
            
            verificationHistory.unshift(historyEntry);
            
            // Keep only last 10 entries
            if (verificationHistory.length > 10) {
                verificationHistory = verificationHistory.slice(0, 10);
            }
            
            // Save to localStorage
            localStorage.setItem('voiceOTPHistory', JSON.stringify(verificationHistory));
            
            updateHistoryDisplay();
            updateHistoryStats();
        }

        function updateHistoryDisplay() {
            const tbody = document.getElementById('historyTableBody');
            const noHistoryRow = document.getElementById('noHistoryRow');
            
            if (verificationHistory.length === 0) {
                noHistoryRow.style.display = '';
                return;
            }
            
            noHistoryRow.style.display = 'none';
            
            // Clear existing rows except the no history row
            const existingRows = tbody.querySelectorAll('tr:not(#noHistoryRow)');
            existingRows.forEach(row => row.remove());
            
            verificationHistory.forEach(entry => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50 transition-colors';
                
                const formatTime = (timestamp) => {
                    const date = new Date(timestamp);
                    return date.toLocaleTimeString() + ' - ' + date.toLocaleDateString();
                };
                
                const getStatusBadge = (isVerified) => {
                    return isVerified 
                        ? '<span class="badge-verified">Verified</span>'
                        : '<span class="badge-failed">Failed</span>';
                };
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">${formatTime(entry.timestamp)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-800">${entry.otp}</td>
                    <td class="px-6 py-4 text-sm text-gray-600 max-w-xs truncate">"${entry.spokenText}"</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">${Math.floor(entry.confidence)}%</td>
                    <td class="px-6 py-4 whitespace-nowrap">${getStatusBadge(entry.isVerified)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">${entry.processingTime}ms</td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function updateHistoryStats() {
            if (verificationHistory.length === 0) {
                document.getElementById('successCount').textContent = '0';
                document.getElementById('failedCount').textContent = '0';
                document.getElementById('accuracyRate').textContent = '0%';
                document.getElementById('avgTime').textContent = '0ms';
                return;
            }
            
            const successCount = verificationHistory.filter(entry => entry.isVerified).length;
            const failedCount = verificationHistory.length - successCount;
            const accuracyRate = Math.round((successCount / verificationHistory.length) * 100);
            const avgTime = Math.round(
                verificationHistory.reduce((sum, entry) => sum + entry.processingTime, 0) / verificationHistory.length
            );
            
            document.getElementById('successCount').textContent = successCount;
            document.getElementById('failedCount').textContent = failedCount;
            document.getElementById('accuracyRate').textContent = accuracyRate + '%';
            document.getElementById('avgTime').textContent = avgTime + 'ms';
        }

        function refreshHistory() {
            showNotification('ðŸ”„ History refreshed', 'info');
            updateHistoryDisplay();
            updateHistoryStats();
        }

        function viewFullHistory() {
            // Redirect to the main history page
            window.location.href = '/history/';
        }
        
        // View Full History function for the history button
        function viewFullHistory() {
            window.location.href = '/history/';
        }
        
        // Start demo function for hero button
        function startDemo() {
            generateOTP();
            setTimeout(playOTP, 1000);
            scrollToSection('demo');
        }
    </script>

    {% include 'partials/footer.html' %}
</body>
</html>
